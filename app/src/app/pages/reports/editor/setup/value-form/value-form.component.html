<form [formGroup]="form" *ngIf="type == 'value'">
    <mat-form-field appearance="outline">
        <mat-label>
            Device
        </mat-label>

        <mat-select name="deviceId" placeholder="device" formControlName="deviceId" required>
            <mat-option [formGroup]="filter">
                <ngx-mat-select-search placeholderLabel="filter devices" noEntriesFoundLabel="no devices found" formControlName="device"></ngx-mat-select-search>
            </mat-option>
            <mat-option *ngFor="let device of devices.data | filterBy : {'description': filter.value.device}" [value]="device.deviceId">
                {{ device.description }}
            </mat-option>
        </mat-select>

        <mat-error *ngIf="errors.deviceId">
            {{ errors.deviceId }}
        </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
        <mat-label>
            Input
        </mat-label>

        <mat-select name="inputId" placeholder="input" formControlName="inputId" required>
            <mat-option [formGroup]="filter">
                <ngx-mat-select-search placeholderLabel="filter inputs" noEntriesFoundLabel="no inputs found" formControlName="input"></ngx-mat-select-search>
            </mat-option>
            <mat-option *ngFor="let input of inputs | filterBy : {'description': filter.value.input}" [value]="input.inputId">
                {{ input.description }}
            </mat-option>
        </mat-select>

        <mat-error *ngIf="errors.inputId">
            {{ errors.inputId }}
        </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
        <mat-label>
            Expression
        </mat-label>

        <mat-select name="expression" placeholder="expression" formControlName="expression" required>
            <mat-option value="last-value">
                Last Value
            </mat-option>
            <mat-option value="first-value">
                First Value
            </mat-option>
            <mat-option value="predict-value">
                Average Value/Predict Value
            </mat-option>
        </mat-select>

        <mat-error *ngIf="errors.expression">
            {{ errors.expression }}
        </mat-error>
    </mat-form-field>
</form>